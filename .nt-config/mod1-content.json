[
  {
    "content_id": "826491ca-f466-4bdf-94b6-d07b9966f857",
    "content_name": "Add Middleware/Configuration to Startup.cs",
    "tasks": [
      {
        "description": "1.1 - Add MVC Middleware to WebApplicationBuilder.Services",
        "contents": "In the `Program.cs` file, call `AddControllersWithViews();` on `builder.Services` to add support for MVC middleware.",
        "checks": [
          {
            "type": "CustomTest",
            "description": "1.1 - Add MVC Middleware to WebApplicationBuilder.Services",
            "command": "bash {{ test }}",
            "contents": "Semgrep -e 'builder.Services.AddControllersWithViews();' -l c# --exclude CompletedExercise",
            "failed_pattern": "Failed"
          }
        ]
      },
      {
        "description": "1.2 - Add UseRouting in Configure",
        "contents": "Add a call to `UseRouting()` on `app`.",
        "checks": [
          {
            "type": "CustomTest",
            "description": "1.2 - Add UseRouting in Configure",
            "command": "bash {{ test }}",
            "contents": "Semgrep -e 'builder.Services.AddControllersWithViews();' -l c# --exclude CompletedExercise",
            "failed_pattern": "Failed"
          }
        ]
      },
      {
        "description": "1.3 - Add UseEndpoints in Configure",
        "contents": "Map the following `default` controller route \n ```app.MapControllerRoute(\n name: \"default\", \n  pattern: \"{controller=Home}/{action=Index}/{id?}\");\n```",
        "checks": [
          {
            "type": "CustomTest",
            "description": "1.3 - Add UseEndpoints in Configure",
            "command": "bash {{ test }}",
            "contents": "Semgrep -e 'app.MapControllerRoute(name: ..., pattern: ...)' -l c# --exclude CompletedExercise",
            "failed_pattern": "Failed"
          }
        ]
      },
      {
        "description": "1.4 - Configure Exception Handling",
        "contents": "Following the `app` declaration, add a condition that checks if `app.Environment` is set to Development using the `IsDevelopment()` method.  - If not in Development, it should call `UseExceptionHandler` on `app` and pass it the argument `\"/Home/Error\"`.",
        "checks": [
          {
            "type": "CustomTest",
            "description": "1.4 - Configure Exception Handling",
            "command": "bash {{ test }}",
            "contents": "Semgrep -e 'app.Environment.IsDevelopment()' -l c# --exclude CompletedExercise, Semgrep -e 'app.UseExceptionHandler(\"/Home/Error\");' -l c# --exclude CompletedExercise",
            "failed_pattern": "Failed"
          }
        ]
      }
    ],
    "steps": [
      {
        "name": "Add Middleware/Configuration to Startup.cs",
        "blocks": [
          {
            "type": "markdown",
            "contents": "Configure application to use MVC Framework as well as developer exception pages and error handler. Creating a view and controller to allow the user to access a home page and error page. \n\nIf you have any questions you can reference the `CompletedExercise` folder\n\n> Note: Please wait to run `Checks` until the `Terminal` says \n> ```\n> Ready to Run Checks\n> ```  "
          },
          {
            "type": "task",
            "contents": "1.1 - Add MVC Middleware to ConfigureServices"
          },
          {
            "type": "task",
            "contents": "1.2 - Add UseRouting in Configure"
          },
          {
            "type": "task",
            "contents": "1.3 - Add UseEndpoints in Configure"
          },
          {
            "type": "task",
            "contents": "1.4 - Configure Exception Handling"
          }
        ]
      }
    ]
  }
]
